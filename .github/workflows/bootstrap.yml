name: Bootstrap Workflow
on:
  workflow_dispatch:
  pull_request:
    types: [opened, closed, synchronize]
  push:

jobs:
  call-assign-from-json-workflow:
    uses: Keyfactor/actions/.github/workflows/assign-env-from-json.yml@main

  download-and-call-second-workflow:
    runs-on: ubuntu-latest
    needs: [call-assign-from-json-workflow]
    steps:
    - name: Checkout
      uses: actions/checkout@v4
      with:
        path: main

    - name: Checkout tools repo
      uses: actions/checkout@v4
      with:
        repository: fiddlermikey/actions
        path: my-tools

    - name: Show name from json
      if:  needs.call-assign-from-json-workflow.outputs.name != ''        
      run: |
        echo "Name=${{ needs.call-assign-from-json-workflow.outputs.name }}" | tee -a "$GITHUB_ENV"
