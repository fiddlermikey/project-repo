name: Bootstrap Workflow

env:
  TOOLS_BRANCH: dev

on:
  workflow_dispatch:
  pull_request:
    types: [opened, closed, synchronize]
  push:

jobs:
  call-assign-from-json-workflow:
    uses: Keyfactor/actions/.github/workflows/assign-env-from-json.yml@main

  download-second-workflow:
    runs-on: ubuntu-latest
    needs: [call-assign-from-json-workflow]
    steps:
    - name: Checkout
      id: checkout-project
      uses: actions/checkout@v4

  call-second-workflow:
    needs: [call-assign-from-json-workflow,download-second-workflow]
    uses: ./.github/workflows/picker.yml
    with:
      buildtype: ${{ needs.call-assign-from-json-workflow.outputs.name }}
